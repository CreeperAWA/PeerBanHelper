import{h as R,i as U,j as q,f,I as z,k as O,l as $,c as E}from"./index-CkOnMM3q.js";import{f as G,a6 as H,r as m,a7 as J,j as u,s as b,t as e,v as p,x as l,a2 as n,y as a,u as k,p as K,k as I,F as Q,P as W}from"./libs-Bgy1OBX3.js";import{k as X,S as Y,r as Z,T as ee,s as ae,q as te}from"./arcoDesign-wjYTUtmB.js";const se=G({__name:"peerListModal",setup(oe,{expose:N}){const{t:o}=H(),_=m(!1),g=m(""),v=m(""),h=m("");N({showModal:(d,s,r)=>{g.value=d,v.value=s,h.value=r,_.value=!0,S(d,s)}});const D=()=>{_.value=!1,g.value="",v.value=""},{data:w,loading:P,run:S,cancel:T}=J(U,{defaultParams:[g.value,v.value]},[R]),A=[{title:()=>o("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:330},{title:()=>o("page.dashboard.peerList.column.port"),dataIndex:"peer.address.port"},{title:()=>o("page.dashboard.peerList.column.flag"),slotName:"flags"},{title:"Peer ID",dataIndex:"peer.id"},{title:()=>o("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName"},{title:()=>o("page.dashboard.peerList.column.speed"),slotName:"speed"},{title:()=>o("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload"},{title:()=>o("page.dashboard.peerList.column.progress"),slotName:"progress"}],C=d=>d.split(" ").map(s=>s+" - "+o("page.dashboard.peerList.column.flags."+s.trim()));return(d,s)=>{const r=X,y=z,x=O,i=Y,F=Z,j=$,B=ee,M=ae,V=te;return u(),b(V,{"hide-cancel":"",closable:"",visible:_.value,"onUpdate:visible":s[0]||(s[0]=c=>_.value=c),onOk:D,"unmount-on-close":"",width:"auto",onClose:s[1]||(s[1]=c=>n(T)())},{title:e(()=>[p(l(n(o)("page.dashboard.peerList.title")+h.value),1)]),default:e(()=>{var c;return[a(M,{columns:A,data:(c=n(w))==null?void 0:c.data,loading:!n(P)&&!n(w),"virtual-list-props":{height:500},pagination:!1},{peerAddress:e(({record:t})=>[a(r,{copyable:"",code:""},{default:e(()=>[t.geo&&t.geo.countryRegion?(u(),b(q,{key:0,iso:t.geo.countryRegion},null,8,["iso"])):k("",!0),p(" "+l(t.peer.address.ip),1)]),_:2},1024)]),speed:e(({record:t})=>[a(i,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(i,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(y,{class:"green"}),p(" "+l(n(f)(t.peer.uploadSpeed))+"/s ",1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),p(" "+l(n(f)(t.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:t})=>[a(i,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(i,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(y,{class:"green"}),p(" "+l(n(f)(t.peer.uploaded)),1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),p(" "+l(n(f)(t.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:t})=>[a(i,null,{default:e(()=>[a(F,{percent:t.peer.progress,size:"mini"},null,8,["percent"]),a(r,null,{default:e(()=>[p(l((t.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:e(({record:t})=>[K("p",null,[p(l(t.peer.flags)+" ",1),t.peer.flags?(u(),b(B,{key:0},{content:e(()=>[(u(!0),I(Q,null,W(C(t.peer.flags),L=>(u(),I("p",{key:L},l(L),1))),128))]),default:e(()=>[a(j)]),_:2},1024)):k("",!0)])]),_:1},8,["data","loading"])]}),_:1},8,["visible"])}}}),pe=E(se,[["__scopeId","data-v-8dffcba6"]]);export{pe as default};
