import{h as R,i as U,j as q,f as m,I as z,k as O,l as $,c as E}from"./index-CePAENc9.js";import{f as G,a6 as H,r as f,a7 as J,j as _,s as b,t as e,v as p,x as l,a2 as n,y as a,u as k,p as K,k as I,F as Q,P as W}from"./libs-Bgy1OBX3.js";import{k as X,S as Y,r as Z,T as ee,s as ae,q as te}from"./arcoDesign-wjYTUtmB.js";const se=G({__name:"peerListModal",setup(oe,{expose:N}){const{t:o}=H(),d=f(!1),g=f(""),v=f(""),h=f("");N({showModal:(i,s,r)=>{g.value=i,v.value=s,h.value=r,d.value=!0,S(i,s)}});const D=()=>{d.value=!1,g.value="",v.value=""},{data:w,loading:P,run:S,cancel:T}=J(U,{defaultParams:[g.value,v.value],ready:d},[R]),A=[{title:()=>o("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:330},{title:()=>o("page.dashboard.peerList.column.port"),dataIndex:"peer.address.port"},{title:()=>o("page.dashboard.peerList.column.flag"),slotName:"flags"},{title:"Peer ID",dataIndex:"peer.id"},{title:()=>o("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName"},{title:()=>o("page.dashboard.peerList.column.speed"),slotName:"speed"},{title:()=>o("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload"},{title:()=>o("page.dashboard.peerList.column.progress"),slotName:"progress"}],C=i=>i.split(" ").map(s=>s+" - "+o("page.dashboard.peerList.column.flags."+s.trim()));return(i,s)=>{const r=X,y=z,x=O,c=Y,F=Z,j=$,B=ee,M=ae,V=te;return _(),b(V,{visible:d.value,"onUpdate:visible":s[0]||(s[0]=u=>d.value=u),"hide-cancel":"",closable:"","unmount-on-close":"",width:"auto",onOk:D,onClose:s[1]||(s[1]=u=>n(T)())},{title:e(()=>[p(l(n(o)("page.dashboard.peerList.title")+h.value),1)]),default:e(()=>{var u;return[a(M,{columns:A,data:(u=n(w))==null?void 0:u.data,loading:!n(P)&&!n(w),"virtual-list-props":{height:500},pagination:!1},{peerAddress:e(({record:t})=>[a(r,{copyable:"",code:""},{default:e(()=>[t.geo&&t.geo.countryRegion?(_(),b(q,{key:0,iso:t.geo.countryRegion},null,8,["iso"])):k("",!0),p(" "+l(t.peer.address.ip),1)]),_:2},1024)]),speed:e(({record:t})=>[a(c,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(c,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(y,{class:"green"}),p(" "+l(n(m)(t.peer.uploadSpeed))+"/s ",1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),p(" "+l(n(m)(t.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:t})=>[a(c,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(c,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(y,{class:"green"}),p(" "+l(n(m)(t.peer.uploaded)),1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),p(" "+l(n(m)(t.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:t})=>[a(c,null,{default:e(()=>[a(F,{percent:t.peer.progress,size:"mini"},null,8,["percent"]),a(r,null,{default:e(()=>[p(l((t.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:e(({record:t})=>[K("p",null,[p(l(t.peer.flags)+" ",1),t.peer.flags?(_(),b(B,{key:0},{content:e(()=>[(_(!0),I(Q,null,W(C(t.peer.flags),L=>(_(),I("p",{key:L},l(L),1))),128))]),default:e(()=>[a(j)]),_:2},1024)):k("",!0)])]),_:1},8,["data","loading"])]}),_:1},8,["visible"])}}}),pe=E(se,[["__scopeId","data-v-21902b2c"]]);export{pe as default};
