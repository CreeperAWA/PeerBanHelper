const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./dummyChart-Cq_fwQER.js","./echarts-D-CGgcc1.js","./libs-Bgy1OBX3.js","./index-Mz1L-OKH.js","./arcoDesign-DMuFiq-Z.js","./index-nFZnqzqJ.css"])))=>i.map(i=>d[i]);
import{u as j,a as G,g as X,b as J,_ as Ve,c as Re,f as _e}from"./index-Mz1L-OKH.js";import{ak as g,B as N,ag as W,L as ce,al as ve,am as ye,F as Y,an as re,W as be,k as we,S as pe,p as H,a4 as me,C as M,ao as ke,T as De,R as Ae,n as Ie,v as Le,u as Pe}from"./arcoDesign-DMuFiq-Z.js";import{u as Q,E as K,i as Z,a as he,b as xe,c as ee,d as Se,e as fe,f as Ee,g as Ue}from"./echarts-D-CGgcc1.js";import{f as V,a6 as z,r as T,a as te,c as A,w as ae,a7 as oe,j as f,s as w,t as n,y as r,a2 as o,v as _,x as h,q as ze,o as Be,I as $e,k as U,F as le,P as ie,A as Oe,n as Fe,M as Me,N as je,p as ue,u as Ne,l as We,a8 as qe}from"./libs-Bgy1OBX3.js";import{I as Ge}from"./index-dnXtKqFP.js";async function Xe(p,e=!1){const t=j();await t.serverAvailable;const s=new URLSearchParams({type:"count",field:p,filter:e?"0.01":"0"}),a=new URL(G(t.endpoint,"api/statistic/analysis/field?"+s.toString()),location.href);return fetch(a,{headers:X()}).then(d=>(t.assertResponseLogin(d),d.json()))}async function Je(p,e,t){const s=j();await s.serverAvailable;const a=new URL(G(s.endpoint,"api/chart/geoIpInfo"),location.href),d=p.getTime(),l=e.getTime();return a.searchParams.append("startAt",d.toString()),a.searchParams.append("endAt",l.toString()),a.searchParams.append("bannedOnly",String(t)),fetch(a,{headers:X()}).then(v=>(s.assertResponseLogin(v),v.json()))}async function Ye(p,e,t){const s=j();await s.serverAvailable;const a=new URLSearchParams({startAt:p.getTime().toString(),endAt:e.getTime().toString(),type:t,field:"banAt"}),d=new URL(G(s.endpoint,"api/statistic/analysis/date?"+a.toString()),location.href);return fetch(d,{headers:X()}).then(l=>(s.assertResponseLogin(l),l.json()))}async function He(p,e){const t=j();await t.serverAvailable;const s=new URLSearchParams({startAt:p.getTime().toString(),endAt:e.getTime().toString()}),a=new URL(G(t.endpoint,"api/chart/trend?"+s.toString()),location.href);return fetch(a,{headers:X()}).then(d=>(t.assertResponseLogin(d),d.json()))}async function Qe(p,e){const t=j();await t.serverAvailable;const s=new URLSearchParams({startAt:p.getTime().toString(),endAt:e.getTime().toString()}),a=new URL(G(t.endpoint,"api/chart/traffic?"+s.toString()),location.href);return fetch(a,{headers:X()}).then(d=>(t.assertResponseLogin(d),d.json()))}const Ke=V({__name:"ispPie",setup(p){const{t:e}=z();Q([Z,he,xe,ee]);const t=J(),s=T(),a=te({field:"isp",enableThreshold:!0,bannedOnly:!0,range:[g().startOf("day").add(-7,"day").toDate(),new Date]}),d=A(()=>({text:e("page.charts.loading"),color:t.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:t.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:t.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),l=T({tooltip:{trigger:"item",appendToBody:!0,formatter:'<p style="word-wrap:break-all"><b>{b}</b></p>  {c} ({d}%)'},legend:{orient:"vertical",left:"right",type:"scroll",right:10,top:20,bottom:20,data:[],textStyle:{overflow:"truncate",width:100},tooltip:{show:!0}},backgroundColor:t.isDark?"rgba(0, 0, 0, 0.0)":void 0,series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});ae(a,m=>{k(m.range[0],m.range[1],a.bannedOnly)});const{loading:v,run:k,refresh:O}=oe(Je,{defaultParams:[g().startOf("day").add(-7,"day").toDate(),new Date,a.bannedOnly],onSuccess:m=>{if(m.data){const i=m.data[a.field];let u;if(a.enableThreshold){const y=i.reduce((b,C)=>b+C.value,0)*.01;u=i.filter(b=>b.value>=y)}else u=i;l.value.legend.data=u.map(c=>c.key),l.value.series[0].data=u.map(c=>({name:c.key==="N/A"&&a.field==="province"?e("page.charts.data.province.na"):c.key,value:c.value})),l.value.series[0].name=e("page.charts.options.field."+a.field)}},onError:m=>{s.value=m}});return(m,i)=>{const u=N,c=W,y=ce,b=ve,C=ye,x=Y,R=re,I=be,L=we,E=pe,B=H,P=me,$=M;return f(),w($,{hoverable:"",title:o(e)("page.charts.title.geoip")+(a.bannedOnly?o(e)("page.charts.subtitle.bannedOnly"):"")},{extra:n(()=>[r(P,null,{content:n(()=>[r(B,{model:a},{default:n(()=>[r(x,{field:"field",label:o(e)("page.charts.options.field")},{default:n(()=>[r(C,{modelValue:a.field,"onUpdate:modelValue":i[1]||(i[1]=F=>a.field=F),"trigger-props":{autoFitPopupMinWidth:!0}},{default:n(()=>[r(b,{value:"isp"},{default:n(()=>[_(h(o(e)("page.charts.options.field.isp")),1)]),_:1}),r(b,{value:"province"},{default:n(()=>[_(h(o(e)("page.charts.options.field.province")),1)]),_:1}),r(b,{value:"city"},{default:n(()=>[_(h(o(e)("page.charts.options.field.city")),1)]),_:1}),r(b,{value:"region"},{default:n(()=>[_(h(o(e)("page.charts.options.field.region")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),r(x,{field:"range",label:o(e)("page.charts.options.days")},{default:n(()=>[r(R,{modelValue:a.range,"onUpdate:modelValue":i[2]||(i[2]=F=>a.range=F),"show-time":"","value-format":"Date",shortcuts:[{label:o(e)("page.charts.options.shortcut.7days"),value:()=>[o(g)().startOf("day").add(-7,"day").toDate(),new Date]},{label:o(e)("page.charts.options.shortcut.14days"),value:()=>[o(g)().startOf("day").add(-14,"day").toDate(),new Date]},{label:o(e)("page.charts.options.shortcut.30days"),value:()=>[o(g)().startOf("day").add(-30,"day").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"]),r(x,{field:"enableThreshold"},{default:n(()=>[r(E,null,{default:n(()=>[r(I,{modelValue:a.enableThreshold,"onUpdate:modelValue":i[3]||(i[3]=F=>a.enableThreshold=F)},null,8,["modelValue"]),r(L,null,{default:n(()=>[_(h(o(e)("page.charts.options.thresold")),1)]),_:1})]),_:1})]),_:1}),r(x,{field:"bannedOnly"},{default:n(()=>[r(E,null,{default:n(()=>[r(I,{modelValue:a.bannedOnly,"onUpdate:modelValue":i[4]||(i[4]=F=>a.bannedOnly=F)},null,8,["modelValue"]),r(L,null,{default:n(()=>[_(h(o(e)("page.charts.options.bannedOnly")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),default:n(()=>[r(y,null,{default:n(()=>[_(h(o(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:n(()=>[s.value?(f(),w(c,{key:0,status:"500",title:o(e)("page.charts.error.title"),class:"chart chart-error"},{subtitle:n(()=>[_(h(s.value.message),1)]),extra:n(()=>[r(u,{type:"primary",onClick:i[0]||(i[0]=()=>{s.value=void 0,o(O)()})},{default:n(()=>[_(h(o(e)("page.charts.error.refresh")),1)]),_:1})]),_:1},8,["title"])):(f(),w(o(K),{key:1,class:"chart",option:l.value,loading:o(v),autoresize:"","loading-options":d.value,theme:o(t).isDark?"dark":"light","init-options":{renderer:"svg"}},null,8,["option","loading","loading-options","theme"]))]),_:1},8,["title"])}}});var Ze=Object.defineProperty,et=(p,e,t)=>e in p?Ze(p,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[e]=t,D=(p,e,t)=>et(p,typeof e!="symbol"?e+"":e,t);const se=(p,e)=>{const t=p.__vccOpts||p;for(const[s,a]of e)t[s]=a;return t},tt={},at={class:"cell"};function ot(p,e){return f(),U("span",at,h(""))}const st=se(tt,[["render",ot],["__scopeId","data-v-511ca080"]]),nt=V({__name:"TileView",props:{tile:{}},setup(p){const e=p,{tile:t}=Oe(e),s=A(()=>{var a=["tile"];return a.push("tile"+t.value.value),t.value.mergedInto||a.push("position_"+t.value.row+"_"+t.value.column),t.value.mergedInto&&a.push("merged"),t.value.isNew()&&a.push("new"),t.value.hasMoved()&&(a.push("row_from_"+t.value.fromRow()+"_to_"+t.value.toRow()),a.push("column_from_"+t.value.fromColumn()+"_to_"+t.value.toColumn()),a.push("isMoving")),a.join(" ")});return(a,d)=>(f(),U("span",{class:Fe(s.value)},h(o(t).value),3))}}),rt=se(nt,[["__scopeId","data-v-fa56f5f8"]]),lt={class:"overlay"},it={class:"message"},dt=V({__name:"GameEndOverlay",props:{board:{},onrestart:{type:Function}},setup(p){const e=p,{board:t}=Oe(e),s=A(()=>t.value.hasWon()||t.value.hasLost()),a=A(()=>t.value.hasWon()?"Good Job!":t.value.hasLost()?"Game Over":""),d=()=>{e.onrestart&&e.onrestart()};return(l,v)=>Me((f(),U("div",lt,[ue("p",it,h(a.value),1),ue("button",{class:"tryAgain",onClick:d},"Try again")],512)),[[je,s.value]])}}),ut=se(dt,[["__scopeId","data-v-4b39d1e3"]]),Ce=class Te{constructor(e,t,s){D(this,"value"),D(this,"row"),D(this,"column"),D(this,"oldRow"),D(this,"oldColumn"),D(this,"markForDeletion"),D(this,"mergedInto"),D(this,"id"),this.value=e||0,this.row=t||-1,this.column=s||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=Te.id++}moveTo(e,t){this.oldRow=this.row,this.oldColumn=this.column,this.row=e,this.column=t}isNew(){return this.oldRow===-1&&!this.mergedInto}hasMoved(){return this.fromRow()!==-1&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||this.mergedInto!==null}fromRow(){return this.mergedInto?this.row:this.oldRow}fromColumn(){return this.mergedInto?this.column:this.oldColumn}toRow(){return this.mergedInto?this.mergedInto.row:this.row}toColumn(){return this.mergedInto?this.mergedInto.column:this.column}};D(Ce,"id",0);let ct=Ce;const q=class S{constructor(){D(this,"tiles"),D(this,"cells"),D(this,"won"),this.tiles=[],this.cells=[];for(let e=0;e<S.size;++e)this.cells[e]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.setPositions(),this.won=!1}addTile(e){const t=new ct(e);return this.tiles.push(t),t}moveLeft(){let e=!1;for(let t=0;t<S.size;++t){const s=this.cells[t].filter(d=>d.value!=0),a=[];for(let d=0;d<S.size;++d){let l=s.length>0?s.shift():this.addTile();if(s.length>0&&s[0].value===l.value){const v=l;l=this.addTile(l.value),v.mergedInto=l;const k=s.shift();k.mergedInto=l,l.value+=k.value}a[d]=l,this.won=this.won||l.value===2048,e=e||l.value!==this.cells[t][d].value}this.cells[t]=a}return e}setPositions(){this.cells.forEach((e,t)=>{e.forEach((s,a)=>{s.oldRow=s.row,s.oldColumn=s.column,s.row=t,s.column=a,s.markForDeletion=!1})})}addRandomTile(){const e=[];for(let d=0;d<S.size;++d)for(let l=0;l<S.size;++l)this.cells[d][l].value===0&&e.push({r:d,c:l});const t=Math.floor(Math.random()*e.length),s=e[t],a=Math.random()<S.fourProbability?4:2;this.cells[s.r][s.c]=this.addTile(a)}move(e){this.clearOldTiles();for(let s=0;s<e;++s)this.cells=this.rotateLeft(this.cells);const t=this.moveLeft();for(let s=e;s<4;++s)this.cells=this.rotateLeft(this.cells);return t&&this.addRandomTile(),this.setPositions(),this}clearOldTiles(){this.tiles=this.tiles.filter(e=>!e.markForDeletion),this.tiles.forEach(e=>e.markForDeletion=!0)}hasWon(){return this.won}hasLost(){let e=!1;for(let t=0;t<S.size;++t)for(let s=0;s<S.size;++s){e=e||this.cells[t][s].value===0;for(let a=0;a<4;++a){const d=t+S.deltaX[a],l=s+S.deltaY[a];d<0||d>=S.size||l<0||l>=S.size||(e=e||this.cells[t][s].value===this.cells[d][l].value)}}return!e}rotateLeft(e){const t=e.length,s=e[0].length,a=[];for(let d=0;d<t;++d){a.push([]);for(let l=0;l<s;++l)a[d][l]=e[l][s-d-1]}return a}};D(q,"size",4),D(q,"fourProbability",.1),D(q,"deltaX",[-1,0,1,0]),D(q,"deltaY",[0,-1,0,1]);let ge=q;const pt={class:"board",tabIndex:"1"},mt=V({__name:"BoardView",setup(p){const e=T(new ge),t=d=>{if(!e.value.hasWon()&&d.keyCode>=37&&d.keyCode<=40){d.preventDefault();var l=d.keyCode-37;e.value.move(l)}},s=()=>{e.value=new ge};Be(()=>{window.addEventListener("keydown",t)}),$e(()=>{window.removeEventListener("keydown",t)});const a=A(()=>e.value.tiles.filter(d=>d.value!=0));return(d,l)=>(f(),U("div",pt,[(f(!0),U(le,null,ie(e.value.cells,(v,k)=>(f(),U("div",{key:k},[(f(!0),U(le,null,ie(v,(O,m)=>(f(),w(st,{key:m}))),128))]))),128)),(f(!0),U(le,null,ie(a.value,(v,k)=>(f(),w(rt,{tile:v,key:k},null,8,["tile"]))),128)),r(ut,{board:e.value,onrestart:s},null,8,["board"])]))}}),ht=se(mt,[["__scopeId","data-v-dd29ef2e"]]),ft={name:"vue-2048",components:{BoardView:ht}};function _t(p,e,t,s,a,d){const l=ze("BoardView");return f(),w(l,{style:{margin:"0 auto"}})}const ne=se(ft,[["render",_t]]),gt=p=>{p.component(ne.name,ne)};ne.install=gt;const vt={class:"chart"},yt=V({__name:"2048",setup(p){const{t:e}=z();return(t,s)=>{const a=ke,d=De,l=M;return f(),w(l,{hoverable:"",title:"2048"},{extra:n(()=>[r(d,{content:o(e)("page.charts.tooltip.2048")},{default:n(()=>[r(a)]),_:1},8,["content"])]),default:n(()=>[ue("div",vt,[r(o(ne),{style:{margin:"0 auto"}})])]),_:1})}}}),bt=V({__name:"banLine",setup(p){const{t:e}=z(),t=A(()=>({text:e("page.charts.loading"),color:s.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:s.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:s.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),s=J(),a=T();Q([Z,Se,fe,ee]);const d=i=>{i==="day"?l.range=[g().startOf("day").add(-7,"day").toDate(),new Date]:l.range=[g().startOf("hour").add(-6,"hour").toDate(),new Date]},l=te({timeStep:"day",range:[g().startOf("day").add(-7,"day").toDate(),new Date]}),v=T({xAxis:{type:"time",max:"dataMax"},yAxis:{type:"value"},tooltip:{trigger:"axis"},series:[{data:[],type:"line",name:e("page.charts.line.options.field")}]});ae(l,i=>{O(i.range[0],i.range[1],i.timeStep)});const{loading:k,run:O,refresh:m}=oe(Ye,{defaultParams:[g().startOf("day").add(-7,"day").toDate(),new Date,"day"],onSuccess:i=>{if(i.data){const u=new Map;for(let c=g(l.range[0]);c.isBefore(g(l.range[1]));c=c.add(1,l.timeStep))u.set(c.valueOf(),0);i.data.forEach(c=>{u.set(g(c.timestamp).startOf(l.timeStep).valueOf(),c.count)}),v.value.series[0].data=Array.from(u).sort(([c],[y])=>c-y).map(([c,y])=>[new Date(c),y])}},onError:i=>{a.value=i}});return(i,u)=>{const c=ce,y=Ae,b=Ie,C=Y,x=re,R=H,I=me,L=N,E=W,B=M;return f(),w(B,{hoverable:"",title:o(e)("page.charts.title.line")},{extra:n(()=>[r(I,null,{content:n(()=>[r(R,{model:l},{default:n(()=>[r(C,{field:"timeStep",label:o(e)("page.charts.options.steps"),"label-col-flex":"100px"},{default:n(()=>[r(b,{modelValue:l.timeStep,"onUpdate:modelValue":u[0]||(u[0]=P=>l.timeStep=P),onChange:u[1]||(u[1]=P=>d(P))},{default:n(()=>[r(y,{value:"day"},{default:n(()=>[_(h(o(e)("page.charts.options.day")),1)]),_:1}),r(y,{value:"hour"},{default:n(()=>[_(h(o(e)("page.charts.options.hour")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),r(C,{field:"range",label:o(e)("page.charts.options.days"),"label-col-flex":"100px"},{default:n(()=>[r(x,{modelValue:l.range,"onUpdate:modelValue":u[2]||(u[2]=P=>l.range=P),"show-time":"","value-format":"Date",shortcuts:l.timeStep==="day"?[{label:o(e)("page.charts.options.shortcut.7days"),value:()=>[o(g)().startOf("day").add(-7,"day").toDate(),new Date]},{label:o(e)("page.charts.options.shortcut.14days"),value:()=>[o(g)().startOf("day").add(-14,"day").toDate(),new Date]},{label:o(e)("page.charts.options.shortcut.30days"),value:()=>[o(g)().startOf("day").add(-30,"day").toDate(),new Date]}]:[{label:o(e)("page.charts.options.shortcut.6hours"),value:()=>[o(g)().startOf("hour").add(-6,"hour").toDate(),new Date]},{label:o(e)("page.charts.options.shortcut.12hours"),value:()=>[o(g)().startOf("hour").add(-12,"hour").toDate(),new Date]},{label:o(e)("page.charts.options.shortcut.24hours"),value:()=>[o(g)().startOf("hour").add(-24,"hour").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"])]),_:1},8,["model"])]),default:n(()=>[r(c,null,{default:n(()=>[_(h(o(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:n(()=>[a.value?(f(),w(E,{key:0,status:"500",title:o(e)("page.charts.error.title"),class:"chart chart-error"},{subtitle:n(()=>[_(h(a.value.message),1)]),extra:n(()=>[r(L,{type:"primary",onClick:u[3]||(u[3]=()=>{a.value=void 0,o(m)()})},{default:n(()=>[_(h(o(e)("page.charts.error.refresh")),1)]),_:1})]),_:1},8,["title"])):(f(),w(o(K),{key:1,class:"chart",option:v.value,loading:o(k),"loading-options":t.value,theme:"ovilia-green",autoresize:"","init-options":{renderer:"svg"}},null,8,["option","loading","loading-options"]))]),_:1},8,["title"])}}}),wt=V({__name:"fieldPie",setup(p){const{t:e}=z();Q([Z,he,xe,ee]);const t=J(),s=te({field:"peerId",enableThreshold:!0,mergeSameVersion:!1}),a=A(()=>({text:e("page.charts.loading"),color:t.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:t.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:t.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),d=T(),l=T({tooltip:{trigger:"item",appendToBody:!0,formatter:'<p style="word-wrap:break-all"><b>{b}</b></p>  {c} ({d}%)'},legend:{orient:"vertical",left:"right",type:"scroll",right:10,top:20,bottom:20,data:[],textStyle:{overflow:"truncate",width:100},tooltip:{show:!0}},backgroundColor:t.isDark?"rgba(0, 0, 0, 0.0)":void 0,series:[{name:e("page.charts.options.field."+s.field),type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});ae(s,m=>{k(m.field,m.enableThreshold)});const{loading:v,run:k,refresh:O}=oe(Xe,{defaultParams:["peerId",!0],onSuccess:m=>{if(m.data){const i=m.data.map(u=>(u.data===""&&(u.data=e("page.charts.options.field.empty")),u));if(s.mergeSameVersion&&s.field==="peerId"){const u=new Map;i.forEach(c=>{let y=c.data;const b=y.match(/^([-]?[a-zA-z]+)[0-9]+.*/);b&&(b==null?void 0:b.length)>=2&&(y=b[1]+"*"),u.has(y)?u.set(y,u.get(y)+c.count):u.set(y,c.count)}),l.value.legend.data=[],l.value.series[0].data=[],Array.from(u).forEach(([c,y])=>{l.value.legend.data.push(c),l.value.series[0].data.push({name:c,value:y})})}else l.value.legend.data=i.map(u=>u.data),l.value.series[0].data=i.map(u=>({name:u.data,value:u.count}))}},onError:m=>{d.value=m}});return(m,i)=>{const u=N,c=W,y=ce,b=ve,C=ye,x=Y,R=be,I=we,L=pe,E=H,B=me,P=M;return f(),w(P,{hoverable:"",title:o(e)("page.charts.options.field."+s.field)},{extra:n(()=>[r(B,null,{content:n(()=>[r(E,{model:s,style:{width:"25vh"}},{default:n(()=>[r(x,{field:"field",label:o(e)("page.charts.options.field")},{default:n(()=>[r(C,{modelValue:s.field,"onUpdate:modelValue":i[1]||(i[1]=$=>s.field=$),"trigger-props":{autoFitPopupMinWidth:!0}},{default:n(()=>[r(b,{value:"peerId"},{default:n(()=>[_(h(o(e)("page.charts.options.field.peerId")),1)]),_:1}),r(b,{value:"torrentName"},{default:n(()=>[_(h(o(e)("page.charts.options.field.torrentName")),1)]),_:1}),r(b,{value:"module"},{default:n(()=>[_(h(o(e)("page.charts.options.field.module")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),r(x,{field:"enableThreshold"},{default:n(()=>[r(L,null,{default:n(()=>[r(R,{modelValue:s.enableThreshold,"onUpdate:modelValue":i[2]||(i[2]=$=>s.enableThreshold=$)},null,8,["modelValue"]),r(I,null,{default:n(()=>[_(h(o(e)("page.charts.options.thresold")),1)]),_:1})]),_:1})]),_:1}),s.field==="peerId"?(f(),w(x,{key:0,field:"mergeSameVersion"},{default:n(()=>[r(L,null,{default:n(()=>[r(R,{modelValue:s.mergeSameVersion,"onUpdate:modelValue":i[3]||(i[3]=$=>s.mergeSameVersion=$)},null,8,["modelValue"]),r(I,null,{default:n(()=>[_(h(o(e)("page.charts.options.mergeSame")),1)]),_:1})]),_:1})]),_:1})):Ne("",!0)]),_:1},8,["model"])]),default:n(()=>[r(y,null,{default:n(()=>[_(h(o(e)("page.charts.options.more")),1)]),_:1})]),_:1})]),default:n(()=>[d.value?(f(),w(c,{key:0,status:"500",title:o(e)("page.charts.error.title"),class:"chart chart-error"},{subtitle:n(()=>[_(h(d.value.message),1)]),extra:n(()=>[r(u,{type:"primary",onClick:i[0]||(i[0]=()=>{d.value=void 0,o(O)()})},{default:n(()=>[_(h(o(e)("page.charts.error.refresh")),1)]),_:1})]),_:1},8,["title"])):(f(),w(o(K),{key:1,class:"chart",option:l.value,loading:o(v),autoresize:"","loading-options":a.value,theme:o(t).isDark?"dark":"light","init-options":{renderer:"svg"}},null,8,["option","loading","loading-options","theme"]))]),_:1},8,["title"])}}}),kt=V({__name:"plusWarpper",props:{title:{}},setup(p){const e=qe(()=>Ve(()=>import("./dummyChart-Cq_fwQER.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),{t}=z(),s=j(),a=A(()=>s.plusStatus),d=()=>{s.emmitter.emit("open-plus-modal")};return(l,v)=>{var u;const k=Ge,O=N,m=W,i=M;return(u=a.value)!=null&&u.activated?We(l.$slots,"default",{key:0},void 0,!0):(f(),w(i,{key:1,hoverable:"",title:l.title},{default:n(()=>[r(m,{class:"overlay",status:"warning",title:o(t)("page.charts.locked")},{icon:n(()=>[r(k)]),subtitle:n(()=>[_(h(o(t)("page.charts.locked.tips")),1)]),extra:n(()=>[r(O,{type:"primary",onClick:d},{default:n(()=>[_(h(o(t)("page.charts.locked.active")),1)]),_:1})]),_:1},8,["title"]),r(o(e))]),_:1},8,["title"]))}}}),de=Re(kt,[["__scopeId","data-v-fa9c84e8"]]),Dt=V({__name:"traffic",setup(p){Q([Z,he,Ee,fe,Ue,ee]);const e=te({range:[g().startOf("day").add(-7,"day").toDate(),new Date]}),t=J(),s=A(()=>({text:a("page.charts.loading"),color:t.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:t.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:t.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),{t:a,d}=z(),l=T(),v=T({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(i){var u;return((u=i[0])==null?void 0:u.name)+":<br/>"+i.map(c=>`${c.marker} ${c.seriesName}: ${_e(c.value)}`).join("<br>")}},legend:{data:[a("page.charts.traffic.options.download"),a("page.charts.traffic.options.upload")]},xAxis:[{type:"category",axisTick:{show:!1},data:[]}],yAxis:[{type:"value",axisLabel:{formatter:i=>_e(i)}}],series:[{name:a("page.charts.traffic.options.download"),type:"bar",barGap:0,emphasis:{focus:"series"},data:[]},{name:a("page.charts.traffic.options.upload"),type:"bar",emphasis:{focus:"series"},data:[]}]});ae(e,i=>{O(i.range[0],i.range[1])});const{loading:k,run:O,refresh:m}=oe(Qe,{defaultParams:[g().startOf("day").add(-7,"day").toDate(),new Date],onSuccess:i=>{i.data&&(v.value.xAxis[0].data.splice(0),v.value.series[0].data.splice(0),v.value.series[1].data.splice(0),i.data.journal.forEach(u=>{v.value.xAxis[0].data.push(d(new Date(u.timestamp),"short")),v.value.series[0].data.push(u.downloaded),v.value.series[1].data.push(u.uploaded)}))},onError:i=>{l.value=i}});return(i,u)=>{const c=ke,y=De,b=pe,C=re,x=Y,R=H,I=N,L=W,E=M;return f(),w(E,{hoverable:""},{title:n(()=>[r(b,null,{default:n(()=>[_(h(o(a)("page.charts.title.traffic"))+" ",1),r(y,{content:o(a)("page.charts.tooltip.traffic")},{default:n(()=>[r(c)]),_:1},8,["content"])]),_:1})]),extra:n(()=>[r(R,{model:e},{default:n(()=>[r(x,{field:"range",style:{"margin-bottom":"0"},label:o(a)("page.charts.options.days")},{default:n(()=>[r(C,{modelValue:e.range,"onUpdate:modelValue":u[0]||(u[0]=B=>e.range=B),style:{width:"275px"},"value-format":"Date",shortcuts:[{label:o(a)("page.charts.options.shortcut.7days"),value:()=>[o(g)().startOf("day").add(-7,"day").toDate(),new Date]},{label:o(a)("page.charts.options.shortcut.14days"),value:()=>[o(g)().startOf("day").add(-14,"day").toDate(),new Date]},{label:o(a)("page.charts.options.shortcut.30days"),value:()=>[o(g)().startOf("day").add(-30,"day").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"])]),_:1},8,["model"])]),default:n(()=>[l.value?(f(),w(L,{key:0,status:"500",title:o(a)("page.charts.error.title"),class:"chart chart-error"},{subtitle:n(()=>[_(h(l.value.message),1)]),extra:n(()=>[r(I,{type:"primary",onClick:u[1]||(u[1]=()=>{l.value=void 0,o(m)()})},{default:n(()=>[_(h(o(a)("page.charts.error.refresh")),1)]),_:1})]),_:1},8,["title"])):(f(),w(o(K),{key:1,class:"chart",option:v.value,loading:o(k),"loading-options":s.value,theme:"ovilia-green",autoresize:"","init-options":{renderer:"svg"}},null,8,["option","loading","loading-options"]))]),_:1})}}}),xt=V({__name:"trends",setup(p){Q([fe,Z,Se,ee]);const{t:e}=z(),t=te({range:[g().startOf("day").add(-7,"day").toDate(),new Date]}),s=T(),a=J(),d=A(()=>({text:e("page.charts.loading"),color:a.isDark?"rgb(60, 126, 255)":"rgb(22, 93, 255)",textColor:a.isDark?"rgba(255, 255, 255, 0.9)":"rgb(29, 33, 41)",maskColor:a.isDark?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.4)"})),l=T({xAxis:{type:"time",max:"dataMax"},yAxis:{type:"value"},tooltip:{trigger:"axis"},series:[{data:[],type:"line",color:"#A5A051",areaStyle:{color:"#A5A051"},name:e("page.charts.trends.options.peers")},{data:[],type:"line",color:"#DB4D6D",areaStyle:{color:"#DB4D6D"},name:e("page.charts.trends.options.bans")}]});ae(t,m=>{k(m.range[0],m.range[1])});const{loading:v,run:k,refresh:O}=oe(He,{defaultParams:[g().startOf("day").add(-7,"day").toDate(),new Date],onSuccess:m=>{m.data&&(l.value.series[0].data=m.data.connectedPeersTrend.sort((i,u)=>i.key-u.key).map(i=>[new Date(i.key),i.value]),l.value.series[1].data=m.data.bannedPeersTrend.sort((i,u)=>i.key-u.key).map(i=>[new Date(i.key),i.value]))},onError:m=>{s.value=m}});return(m,i)=>{const u=re,c=Y,y=H,b=N,C=W,x=M;return f(),w(x,{hoverable:"",title:o(e)("page.charts.title.trends")},{extra:n(()=>[r(y,{model:t},{default:n(()=>[r(c,{field:"range",label:o(e)("page.charts.options.days"),style:{"margin-bottom":"0"}},{default:n(()=>[r(u,{modelValue:t.range,"onUpdate:modelValue":i[0]||(i[0]=R=>t.range=R),"value-format":"Date",style:{width:"275px"},shortcuts:[{label:o(e)("page.charts.options.shortcut.7days"),value:()=>[o(g)().startOf("day").add(-7,"day").toDate(),new Date]},{label:o(e)("page.charts.options.shortcut.14days"),value:()=>[o(g)().startOf("day").add(-14,"day").toDate(),new Date]},{label:o(e)("page.charts.options.shortcut.30days"),value:()=>[o(g)().startOf("day").add(-30,"day").toDate(),new Date]}]},null,8,["modelValue","shortcuts"])]),_:1},8,["label"])]),_:1},8,["model"])]),default:n(()=>[s.value?(f(),w(C,{key:0,status:"500",title:o(e)("page.charts.error.title"),class:"chart chart-error"},{subtitle:n(()=>[_(h(s.value.message),1)]),extra:n(()=>[r(b,{type:"primary",onClick:i[1]||(i[1]=()=>{s.value=void 0,o(O)()})},{default:n(()=>[_(h(o(e)("page.charts.error.refresh")),1)]),_:1})]),_:1},8,["title"])):(f(),w(o(K),{key:1,class:"chart",option:l.value,loading:o(v),"loading-options":d.value,theme:"ovilia-green",autoresize:"","init-options":{renderer:"svg"}},null,8,["option","loading","loading-options"]))]),_:1},8,["title"])}}}),Rt=V({__name:"index",setup(p){const{t:e}=z();return(t,s)=>{const a=Pe,d=Le;return f(),w(d,{justify:"center",align:"stretch",wrap:!0,gutter:[{xs:12,sm:12,md:12,lg:12,xl:24},{xs:12,sm:12,md:12,lg:12,xl:24}]},{default:n(()=>[r(a,{xl:12,lg:24,md:24,sm:24,xs:24},{default:n(()=>[r(bt)]),_:1}),r(a,{xl:12,lg:24,md:24,sm:24,xs:24},{default:n(()=>[r(wt)]),_:1}),r(a,{xl:12,lg:24,md:24,sm:24,xs:24},{default:n(()=>[r(de,{title:o(e)("page.charts.title.geoip")},{default:n(()=>[r(Ke)]),_:1},8,["title"])]),_:1}),r(a,{xl:12,lg:24,md:24,sm:24,xs:24},{default:n(()=>[r(yt)]),_:1}),r(a,{xl:24,lg:24,md:24,sm:24,xs:24},{default:n(()=>[r(de,{title:o(e)("page.charts.title.trends")},{default:n(()=>[r(xt)]),_:1},8,["title"])]),_:1}),r(a,{xl:24,lg:24,md:24,sm:24,xs:24},{default:n(()=>[r(de,{title:o(e)("page.charts.title.traffic")},{default:n(()=>[r(Dt)]),_:1},8,["title"])]),_:1})]),_:1})}}});export{Rt as default};
