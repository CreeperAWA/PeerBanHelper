import{n as O,j as R,e as $,f as m,I as z,b as U,c as q,_ as E}from"./index-CzMaGNoT.js";import{f as Q,a6 as G,r as f,a8 as H,j as u,s as b,t as e,v as p,x as l,a2 as n,y as a,u as I,p as J,k as N,F as K,P as W}from"./libs-Bsjl4Mfh.js";import{T as X,S as Y,Q as Z,c as ee,o as ae,O as te}from"./arcoDesign-Dk7yFUDg.js";const se=Q({__name:"peerListModal",setup(oe,{expose:k}){const{t:o}=G(),_=f(!1),g=f(""),v=f(""),w=f("");k({showModal:(d,s,r)=>{g.value=d,v.value=s,w.value=r,_.value=!0,T(d,s)}});const D=()=>{_.value=!1,g.value="",v.value=""},{data:y,loading:S,run:T,cancel:C}=H(O,{defaultParams:[g.value,v.value],manual:!0,pollingInterval:1e3}),F=[{title:()=>o("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:330},{title:()=>o("page.dashboard.peerList.column.port"),dataIndex:"peer.address.port"},{title:()=>o("page.dashboard.peerList.column.flag"),slotName:"flags"},{title:"Peer ID",dataIndex:"peer.id"},{title:()=>o("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName"},{title:()=>o("page.dashboard.peerList.column.speed"),slotName:"speed"},{title:()=>o("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload"},{title:()=>o("page.dashboard.peerList.column.progress"),slotName:"progress"}],P=d=>d.split(" ").map(s=>s+" - "+o("page.dashboard.peerList.column.flags."+s.trim()));return(d,s)=>{const r=X,h=z,x=U,i=Y,j=Z,A=q,B=ee,M=ae,V=te;return u(),b(V,{visible:_.value,"onUpdate:visible":s[0]||(s[0]=c=>_.value=c),"hide-cancel":"",closable:"","unmount-on-close":"",width:"auto",onOk:D,onClose:s[1]||(s[1]=c=>n(C)())},{title:e(()=>[p(l(n(o)("page.dashboard.peerList.title")+w.value),1)]),default:e(()=>{var c;return[a(M,{columns:F,data:(c=n(y))==null?void 0:c.data,loading:!n(S)&&!n(y),"virtual-list-props":{height:500},pagination:!1},{peerAddress:e(({record:t})=>[a(r,{copyable:"",code:""},{default:e(()=>[t.geo&&t.geo.countryRegion?(u(),b(R,{key:0,iso:t.geo.countryRegion},null,8,["iso"])):I("",!0),a($,{ip:t.peer.address.ip,style:{color:"var(--color-text-2)"}},{default:e(()=>[p(l(t.peer.address.ip),1)]),_:2},1032,["ip"])]),_:2},1024)]),speed:e(({record:t})=>[a(i,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(i,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(h,{class:"green"}),p(" "+l(n(m)(t.peer.uploadSpeed))+"/s ",1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),p(" "+l(n(m)(t.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:t})=>[a(i,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(i,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(h,{class:"green"}),p(" "+l(n(m)(t.peer.uploaded)),1)]),_:2},1024),a(r,null,{default:e(()=>[a(x,{class:"red"}),p(" "+l(n(m)(t.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:t})=>[a(i,null,{default:e(()=>[a(j,{percent:t.peer.progress,size:"mini"},null,8,["percent"]),a(r,null,{default:e(()=>[p(l((t.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:e(({record:t})=>[J("p",null,[p(l(t.peer.flags)+" ",1),t.peer.flags?(u(),b(B,{key:0},{content:e(()=>[(u(!0),N(K,null,W(P(t.peer.flags),L=>(u(),N("p",{key:L},l(L),1))),128))]),default:e(()=>[a(A)]),_:2},1024)):I("",!0)])]),_:1},8,["data","loading"])]}),_:1},8,["visible"])}}}),pe=E(se,[["__scopeId","data-v-e3ad9f14"]]);export{pe as default};
